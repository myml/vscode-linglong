{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "BuilderProject",
  "description": "Linglong project build file.",
  "type": "object",
  "required": ["version", "package", "build", "base"],
  "properties": {
    "version": {
      "type": "string",
      "description": "version of build file"
    },
    "exclude": {
      "type": "array",
      "description": "exclude files during exporting UAB. Every item should be absolute path in container. It could be a directory or a regular file. e.g. - /usr/share/locale (exclude all files which in this directory) - /usr/lib/libavfs.a (exclude one file)",
      "items": {
        "type": "string"
      }
    },
    "include": {
      "type": "array",
      "description": "include files during exporting UAB. For example, the packer can declare a file/directory (e.g. /usr/share/locale/zh_CN) in the excluded directory (e.g. /usr/share/locale)  to exclude all files in /usr/share/locale except /usr/share/locale/zh_CN.",
      "items": {
        "type": "string"
      }
    },
    "package": {
      "title": "BuilderProjectPackage",
      "description": "package of build file",
      "type": "object",
      "required": ["id", "kind", "name", "version", "description"],
      "properties": {
        "id": {
          "type": "string",
          "description": "id of package"
        },
        "kind": {
          "type": "string",
          "description": "kind of package"
        },
        "name": {
          "type": "string",
          "description": "name of package"
        },
        "version": {
          "type": "string",
          "description": "version of package"
        },
        "description": {
          "type": "string",
          "description": "description of package"
        },
        "architecture": {
          "type": "string",
          "description": "architecture of package"
        },
        "channel": {
          "type": "string",
          "description": "channel of package"
        },
        "extension_of": {
          "type": "string",
          "description": "extension of whom"
        },
        "libs": {
          "description": "extra ld search path",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "env": {
          "description": "Predefined environment variables when the extension is applied",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        }
      }
    },
    "runtime": {
      "type": "string",
      "description": "used runtime of package"
    },
    "base": {
      "type": "string",
      "description": "used base of package"
    },
    "sources": {
      "type": "array",
      "description": "sources of package",
      "items": {
        "title": "BuilderProjectSource",
        "description": "items of sources of builder project",
        "type": "object",
        "required": ["kind"],
        "properties": {
          "kind": {
            "type": "string",
            "description": "kind of source"
          },
          "url": {
            "type": "string",
            "description": "url of source"
          },
          "digest": {
            "type": "string",
            "description": "digest of source"
          },
          "commit": {
            "type": "string",
            "description": "commit of source"
          },
          "version": {
            "type": "string",
            "description": "version of source"
          },
          "name": {
            "type": "string",
            "description": "name of source"
          }
        }
      }
    },
    "build": {
      "title": "BuilderProjectBuildScript",
      "description": "build script of builder project",
      "type": "string"
    },
    "buildext": {
      "title": "BuilderProjectBuildExt",
      "description": "build extension for builder project",
      "type": "object",
      "properties": {
        "apt": {
          "description": "build extension for apt",
          "type": "object",
          "properties": {
            "build_depends": {
              "description": "packages to be installed in build environment before build starting",
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "depends": {
              "description": "packages to be installed in runtime environment",
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "command": {
      "type": "array",
      "description": "command of builder project",
      "items": {
        "type": "string"
      }
    },
    "strip": {
      "title": "BuilderProjectStripScript",
      "description": "strip script of builder project",
      "type": "string"
    },
    "modules": {
      "title": "BuilderProjectModules",
      "description": "Specify how to split application into modules.\n",
      "type": "array",
      "items": {
        "title": "BuilderProjectModules",
        "description": "items of modules of builder project",
        "type": "object",
        "required": ["name", "files"],
        "properties": {
          "name": {
            "type": "string",
            "description": "module name"
          },
          "files": {
            "type": "array",
            "description": "module install files",
            "items": {
              "type": "string",
              "description": "module install file"
            }
          }
        }
      }
    }
  }
}
